import{c as Z,aA as Ce,r as n,j as e,a as U,z,E as Ie,n as h,p as M,G as J,H as G,I as Q,q as b,t as S,v as C,w as I,x as a,J as v,k as l,i as c,Q as o,T as B,e as Te,aO as $,f as q,aN as De,a3 as Pe,a4 as Oe,a5 as T,aa as D,V as O,W as A,b as Ae,Y as K,a6 as ke,M as Ee,U as Re,F as Y,ac as Me,aL as Be,a8 as qe,aP as Fe,aQ as He}from"./index-ChsUsUzn.js";import{S as Le}from"./square-pen-BhNbn2-E.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=Z("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=Z("HardHat",[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]]);function Je(){const{toast:F}=Ce(),[p,k]=n.useState([]),[X,ee]=n.useState([]),[g,se]=n.useState([]),[H,te]=n.useState([]),[r,ae]=n.useState(null),[u,ie]=n.useState(""),[N,re]=n.useState("all"),[y,ne]=n.useState("all"),[f,le]=n.useState("all"),[de,P]=n.useState(!1),[ce,L]=n.useState(!1),[W,oe]=n.useState("overview"),[i,d]=n.useState({type:"near_miss",severity:"medium",title:"",description:"",location:"",dateOccurred:"",timeOccurred:"",witnessedBy:[],immediateActions:"",newWitness:""});n.useEffect(()=>{me(),xe(),he()},[]),n.useEffect(()=>{ue()},[p,u,N,y,f]);const me=async()=>{const s=[{id:"1",reportNumber:"INC-2024-001",type:"near_miss",severity:"medium",status:"investigating",title:"Near miss with equipment",description:"Employee almost struck by backing equipment due to lack of spotter",location:"First Baptist Church Site",dateOccurred:new Date().toISOString().split("T")[0],timeOccurred:"10:30",reportedBy:"John Smith",reportedDate:new Date().toISOString().split("T")[0],witnessedBy:["Mike Johnson"],injuredPersons:[],immediateActions:"Stopped work, briefed crew on spotter requirements",correctiveActions:["Implement mandatory spotter protocol","Additional safety training"],preventiveMeasures:["Install backup alarms","Mark equipment blind spots"],attachments:[],investigation:{assignedTo:"Sarah Davis",startDate:new Date().toISOString().split("T")[0],findings:"Investigation in progress"}},{id:"2",reportNumber:"INC-2024-002",type:"injury",severity:"low",status:"resolved",title:"Minor cut on hand",description:"Employee sustained small cut while handling materials without proper gloves",location:"Material Storage Area",dateOccurred:new Date(Date.now()-2592e5).toISOString().split("T")[0],timeOccurred:"14:15",reportedBy:"Mike Johnson",reportedDate:new Date(Date.now()-2592e5).toISOString().split("T")[0],witnessedBy:[],injuredPersons:[{name:"Tom Wilson",role:"Laborer",injuryType:"Minor cut on left hand",medicalAttention:!0}],immediateActions:"First aid applied, wound cleaned and bandaged",rootCause:"Failure to use required PPE",correctiveActions:["PPE refresher training","Improve PPE availability"],preventiveMeasures:["Daily PPE checks","PPE station setup at material area"],attachments:[],investigation:{assignedTo:"Sarah Davis",startDate:new Date(Date.now()-2592e5).toISOString().split("T")[0],completedDate:new Date(Date.now()-864e5).toISOString().split("T")[0],findings:"Employee failed to wear required cut-resistant gloves when handling sharp materials"}}];k(s)},xe=async()=>{ee([{id:"1",title:"Personal Protective Equipment (PPE)",category:"General Safety",description:"Standard PPE requirements for all construction activities",steps:["Assess work area hazards","Select appropriate PPE","Inspect PPE before use","Wear PPE properly","Maintain and store PPE correctly"],equipment:["Hard hat","Safety glasses","High-vis vest","Steel-toe boots","Work gloves"],compliance:["OSHA 1926.95","ANSI Z89.1"],lastUpdated:"2024-01-01",nextReview:"2024-07-01",status:"active",attachments:[]},{id:"2",title:"Equipment Operation Safety",category:"Equipment",description:"Safe operation procedures for construction equipment",steps:["Pre-operation inspection","Verify operator certification","Ensure spotter when backing","Maintain safe distances","Follow lockout/tagout procedures"],equipment:["Checklist forms","Communication devices","Warning devices"],compliance:["OSHA 1926.601","OSHA 1926.602"],lastUpdated:"2024-01-15",nextReview:"2024-07-15",status:"active",attachments:[]}])},he=async()=>{se([{id:"1",employeeId:"emp-1",employeeName:"John Smith",trainingType:"OSHA 30-Hour",title:"OSHA 30-Hour Construction Safety",provider:"Safety Training Institute",completedDate:"2023-02-15",expiryDate:"2026-02-15",certificateNumber:"OSH-30-2023-001",status:"valid",requiredBy:"Federal Law"},{id:"2",employeeId:"emp-2",employeeName:"Mike Johnson",trainingType:"Equipment Safety",title:"Heavy Equipment Operation Safety",provider:"Equipment Safety Corp",completedDate:"2023-06-10",expiryDate:"2025-06-10",certificateNumber:"EQP-SAF-2023-045",status:"expiring",requiredBy:"Company Policy"},{id:"3",employeeId:"emp-3",employeeName:"Sarah Davis",trainingType:"First Aid/CPR",title:"First Aid and CPR Certification",provider:"Red Cross",completedDate:"2022-08-20",expiryDate:"2024-08-20",status:"expired",requiredBy:"Company Policy"}])},ue=()=>{let s=p;u&&(s=s.filter(t=>t.title.toLowerCase().includes(u.toLowerCase())||t.description.toLowerCase().includes(u.toLowerCase())||t.location.toLowerCase().includes(u.toLowerCase())||t.reportedBy.toLowerCase().includes(u.toLowerCase()))),N!=="all"&&(s=s.filter(t=>t.type===N)),y!=="all"&&(s=s.filter(t=>t.severity===y)),f!=="all"&&(s=s.filter(t=>t.status===f)),te(s)},je=async()=>{const s={id:Date.now().toString(),reportNumber:`INC-2024-${String(p.length+1).padStart(3,"0")}`,type:i.type,severity:i.severity,status:"reported",title:i.title,description:i.description,location:i.location,dateOccurred:i.dateOccurred,timeOccurred:i.timeOccurred,reportedBy:"Current User",reportedDate:new Date().toISOString().split("T")[0],witnessedBy:i.witnessedBy,injuredPersons:[],immediateActions:i.immediateActions,correctiveActions:[],preventiveMeasures:[],attachments:[],investigation:{assignedTo:"",startDate:"",findings:""}};k(t=>[s,...t]),P(!1),d({type:"near_miss",severity:"medium",title:"",description:"",location:"",dateOccurred:"",timeOccurred:"",witnessedBy:[],immediateActions:"",newWitness:""}),F({title:"Incident Reported",description:`Incident ${s.reportNumber} has been reported`})},pe=s=>{k(t=>t.filter(j=>j.id!==s)),F({title:"Incident Deleted",description:"Incident has been removed from records"})},V=()=>{i.newWitness.trim()&&!i.witnessedBy.includes(i.newWitness.trim())&&d(s=>({...s,witnessedBy:[...s.witnessedBy,s.newWitness.trim()],newWitness:""}))},ve=s=>{d(t=>({...t,witnessedBy:t.witnessedBy.filter(j=>j!==s)}))},_=s=>{switch(s){case"injury":return"text-red-600 bg-red-100";case"near_miss":return"text-yellow-600 bg-yellow-100";case"property_damage":return"text-orange-600 bg-orange-100";case"environmental":return"text-green-600 bg-green-100";case"security":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},E=s=>{switch(s){case"critical":return"text-red-600";case"high":return"text-orange-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}},R=s=>{switch(s){case"reported":return"text-blue-600 bg-blue-100";case"investigating":return"text-yellow-600 bg-yellow-100";case"resolved":return"text-green-600 bg-green-100";case"closed":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},ge=s=>{switch(s){case"valid":return"text-green-600 bg-green-100";case"expiring":return"text-yellow-600 bg-yellow-100";case"expired":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),x=(()=>{const s=p.length,t=p.filter(m=>m.type==="injury").length,j=p.filter(m=>m.type==="near_miss").length,Ne=p.filter(m=>m.status==="resolved").length,ye=s>0?Ne/s*100:0,fe=g.filter(m=>m.status==="expired").length,we=g.filter(m=>m.status==="expiring").length,be=g.filter(m=>m.status==="valid").length,Se=g.length>0?be/g.length*100:0;return{totalIncidents:s,injuryRate:t,nearMissRate:j,resolutionRate:ye,expiredTrainings:fe,expiringTrainings:we,trainingCompliance:Se}})();return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Safety Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor incidents, track training, and ensure compliance"})]})]}),e.jsxs(z,{open:de,onOpenChange:P,children:[e.jsx(Ie,{asChild:!0,children:e.jsxs(h,{children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Report Incident"]})}),e.jsxs(J,{className:"max-w-2xl",children:[e.jsx(G,{children:e.jsx(Q,{children:"Report Safety Incident"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Incident Type"}),e.jsxs(b,{value:i.type,onValueChange:s=>d(t=>({...t,type:s})),children:[e.jsx(S,{children:e.jsx(C,{})}),e.jsxs(I,{children:[e.jsx(a,{value:"injury",children:"Injury"}),e.jsx(a,{value:"near_miss",children:"Near Miss"}),e.jsx(a,{value:"property_damage",children:"Property Damage"}),e.jsx(a,{value:"environmental",children:"Environmental"}),e.jsx(a,{value:"security",children:"Security"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Severity"}),e.jsxs(b,{value:i.severity,onValueChange:s=>d(t=>({...t,severity:s})),children:[e.jsx(S,{children:e.jsx(C,{})}),e.jsxs(I,{children:[e.jsx(a,{value:"low",children:"Low"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"high",children:"High"}),e.jsx(a,{value:"critical",children:"Critical"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Incident Title"}),e.jsx(v,{value:i.title,onChange:s=>d(t=>({...t,title:s.target.value})),placeholder:"Brief description of incident"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Detailed Description"}),e.jsx(v,{value:i.description,onChange:s=>d(t=>({...t,description:s.target.value})),placeholder:"Detailed description of what happened"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Location"}),e.jsx(v,{value:i.location,onChange:s=>d(t=>({...t,location:s.target.value})),placeholder:"Incident location"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Date Occurred"}),e.jsx(v,{type:"date",value:i.dateOccurred,onChange:s=>d(t=>({...t,dateOccurred:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Time Occurred"}),e.jsx(v,{type:"time",value:i.timeOccurred,onChange:s=>d(t=>({...t,timeOccurred:s.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Witnesses"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{value:i.newWitness,onChange:s=>d(t=>({...t,newWitness:s.target.value})),placeholder:"Add witness name...",onKeyPress:s=>s.key==="Enter"&&V()}),e.jsx(h,{type:"button",onClick:V,size:"sm",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:i.witnessedBy.map(s=>e.jsxs(l,{variant:"secondary",className:"cursor-pointer",onClick:()=>ve(s),children:[s," ×"]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Immediate Actions Taken"}),e.jsx(v,{value:i.immediateActions,onChange:s=>d(t=>({...t,immediateActions:s.target.value})),placeholder:"What immediate actions were taken?"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(h,{onClick:je,children:"Report Incident"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(c,{children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:x.totalIncidents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Incidents"})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[x.resolutionRate.toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Resolution Rate"})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[x.trainingCompliance.toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Training Compliance"})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.expiringTrainings}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Expiring Training"})]})]})})})]}),e.jsx(c,{children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search incidents...",value:u,onChange:s=>ie(s.target.value),className:"pl-10"})]})}),e.jsxs(b,{value:N,onValueChange:re,children:[e.jsx(S,{className:"w-[150px]",children:e.jsx(C,{placeholder:"Type"})}),e.jsxs(I,{children:[e.jsx(a,{value:"all",children:"All Types"}),e.jsx(a,{value:"injury",children:"Injury"}),e.jsx(a,{value:"near_miss",children:"Near Miss"}),e.jsx(a,{value:"property_damage",children:"Property Damage"}),e.jsx(a,{value:"environmental",children:"Environmental"}),e.jsx(a,{value:"security",children:"Security"})]})]}),e.jsxs(b,{value:y,onValueChange:ne,children:[e.jsx(S,{className:"w-[150px]",children:e.jsx(C,{placeholder:"Severity"})}),e.jsxs(I,{children:[e.jsx(a,{value:"all",children:"All Severities"}),e.jsx(a,{value:"critical",children:"Critical"}),e.jsx(a,{value:"high",children:"High"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"low",children:"Low"})]})]}),e.jsxs(b,{value:f,onValueChange:le,children:[e.jsx(S,{className:"w-[150px]",children:e.jsx(C,{placeholder:"Status"})}),e.jsxs(I,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"reported",children:"Reported"}),e.jsx(a,{value:"investigating",children:"Investigating"}),e.jsx(a,{value:"resolved",children:"Resolved"}),e.jsx(a,{value:"closed",children:"Closed"})]})]})]})})}),e.jsxs(Pe,{value:W,onValueChange:oe,className:"space-y-6",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-5",children:[e.jsx(T,{value:"overview",children:"Overview"}),e.jsx(T,{value:"incidents",children:"Incidents"}),e.jsx(T,{value:"protocols",children:"Protocols"}),e.jsx(T,{value:"training",children:"Training"}),e.jsx(T,{value:"compliance",children:"Compliance"})]}),e.jsx(D,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(c,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5"}),"Safety Performance"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Incident Resolution Rate"}),e.jsxs("span",{className:"font-medium",children:[x.resolutionRate.toFixed(0),"%"]})]}),e.jsx(K,{value:x.resolutionRate,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Training Compliance"}),e.jsxs("span",{className:"font-medium",children:[x.trainingCompliance.toFixed(0),"%"]})]}),e.jsx(K,{value:x.trainingCompliance,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.nearMissRate}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Near Misses"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:x.injuryRate}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Injuries"})]})]})]})]}),e.jsxs(c,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-3",children:p.slice(0,4).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:`h-4 w-4 ${E(s.severity)}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:s.title}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.reportNumber," • ",w(s.dateOccurred)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx(l,{variant:"outline",className:R(s.status),children:s.status})})]},s.id))})})]})]})}),e.jsx(D,{value:"incidents",className:"space-y-6",children:e.jsx("div",{className:"grid gap-4",children:H.map(s=>e.jsx(c,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.title}),e.jsx(l,{className:_(s.type),children:s.type.replace("_"," ")}),e.jsx(l,{variant:"outline",className:E(s.severity),children:s.severity}),e.jsx(l,{className:R(s.status),children:s.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.reportNumber," • Reported by ",s.reportedBy]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:[w(s.dateOccurred)," at ",s.timeOccurred]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:[s.witnessedBy.length," witnesses"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:[s.attachments.length," attachments"]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Description:"}),e.jsx("div",{className:"text-muted-foreground",children:s.description})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Immediate Actions:"}),e.jsx("div",{className:"text-muted-foreground",children:s.immediateActions})]}),s.injuredPersons.length>0&&e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-red-600",children:"Injured Persons:"}),s.injuredPersons.map((t,j)=>e.jsxs("div",{className:"text-muted-foreground",children:[t.name," (",t.role,") - ",t.injuryType,t.medicalAttention&&e.jsx(l,{variant:"outline",className:"ml-2 text-xs",children:"Medical Attention"})]},j))]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"outline",size:"sm",onClick:()=>{ae(s),L(!0)},children:e.jsx(Me,{className:"h-3 w-3"})}),e.jsx(h,{variant:"outline",size:"sm",children:e.jsx(Le,{className:"h-3 w-3"})}),e.jsx(h,{variant:"outline",size:"sm",onClick:()=>pe(s.id),children:e.jsx(Be,{className:"h-3 w-3"})})]})]})})},s.id))})}),e.jsx(D,{value:"protocols",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:X.map(s=>e.jsxs(c,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center justify-between",children:[e.jsx("span",{children:s.title}),e.jsx(l,{variant:s.status==="active"?"default":"secondary",children:s.status})]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm mb-2",children:"Key Steps:"}),e.jsxs("div",{className:"space-y-1",children:[s.steps.slice(0,3).map((t,j)=>e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx(qe,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{children:t})]},j)),s.steps.length>3&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["+",s.steps.length-3," more steps"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm mb-2",children:"Required Equipment:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.equipment.slice(0,3).map(t=>e.jsx(l,{variant:"secondary",className:"text-xs",children:t},t)),s.equipment.length>3&&e.jsxs(l,{variant:"secondary",className:"text-xs",children:["+",s.equipment.length-3]})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Last Updated: ",w(s.lastUpdated)]}),e.jsxs("span",{children:["Next Review: ",w(s.nextReview)]})]})]})]},s.id))})}),e.jsx(D,{value:"training",className:"space-y-6",children:e.jsx("div",{className:"grid gap-4",children:g.map(s=>e.jsx(c,{children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Fe,{className:"h-10 w-10",children:e.jsx(He,{children:s.employeeName.split(" ").map(t=>t[0]).join("")})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.employeeName}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.title})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(l,{className:ge(s.status),children:s.status}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Expires: ",w(s.expiryDate)]})]})]})})},s.id))})}),e.jsx(D,{value:"compliance",className:"space-y-6",children:e.jsxs(c,{children:[e.jsx(O,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5"}),"Compliance Dashboard"]})}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"p-4 border rounded-md text-center",children:[e.jsx(Ve,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"font-medium",children:"OSHA Compliance"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"98%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Up to date"})]}),e.jsxs("div",{className:"p-4 border rounded-md text-center",children:[e.jsx($,{className:"h-8 w-8 mx-auto mb-2 text-yellow-500"}),e.jsx("div",{className:"font-medium",children:"Training Records"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:"85%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Needs attention"})]}),e.jsxs("div",{className:"p-4 border rounded-md text-center",children:[e.jsx(Y,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"font-medium",children:"Safety Protocols"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"100%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Current"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Action Items"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md",children:[e.jsx(B,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:"Sarah Davis - First Aid/CPR Expired"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Certification expired on Aug 20, 2024"})]}),e.jsx(h,{size:"sm",variant:"outline",children:"Schedule"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md",children:[e.jsx(q,{className:"h-4 w-4 text-orange-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:"Mike Johnson - Equipment Safety Expiring"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Expires on June 10, 2025"})]}),e.jsx(h,{size:"sm",variant:"outline",children:"Renew"})]})]})]})]})]})})]}),e.jsx(z,{open:ce,onOpenChange:L,children:e.jsxs(J,{className:"max-w-4xl",children:[e.jsx(G,{children:e.jsxs(Q,{children:[r?.reportNumber," - ",r?.title]})}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Type"}),e.jsx(l,{className:_(r.type),children:r.type.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Severity"}),e.jsx(l,{variant:"outline",className:E(r.severity),children:r.severity})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Status"}),e.jsx(l,{className:R(r.status),children:r.status})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Location"}),e.jsx("div",{className:"font-medium",children:r.location})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Date & Time"}),e.jsxs("div",{className:"font-medium",children:[w(r.dateOccurred)," at ",r.timeOccurred]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Reported By"}),e.jsx("div",{className:"font-medium",children:r.reportedBy})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground text-sm mb-2",children:"Description"}),e.jsx("div",{className:"p-3 border rounded-md bg-muted/50",children:r.description})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground text-sm mb-2",children:"Immediate Actions"}),e.jsx("div",{className:"p-3 border rounded-md bg-muted/50",children:r.immediateActions})]}),r.witnessedBy.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground text-sm mb-2",children:"Witnesses"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.witnessedBy.map(s=>e.jsx(l,{variant:"secondary",children:s},s))})]}),r.investigation.findings&&e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground text-sm mb-2",children:"Investigation Findings"}),e.jsx("div",{className:"p-3 border rounded-md bg-muted/50",children:r.investigation.findings})]})]})]})}),H.length===0&&W==="incidents"&&e.jsx(c,{children:e.jsxs(o,{className:"text-center py-12",children:[e.jsx(U,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Incidents Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:u||N!=="all"||y!=="all"||f!=="all"?"No incidents match your current filters":"Great! No safety incidents have been reported"}),!u&&N==="all"&&y==="all"&&f==="all"&&e.jsxs(h,{onClick:()=>P(!0),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Report Incident"]})]})})]})})}export{Je as default};
