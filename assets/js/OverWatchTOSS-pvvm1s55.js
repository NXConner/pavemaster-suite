import{c as p,u as Fe,r as c,s as r,S as Ie,T as Oe,F as Re,K as We,L as Ee,a as ie,P as Ve,B as qe,A as ce,b as Ue,C as $e,D as Be,d as re,e as He,f as Ge,g as Je,N as Ke,h as Qe,U as Ye,M as Ze,j as e,i as _,k as v,l as H,m as z,n as o,o as Xe,p as es,q as T,t as L,v as D,w as P,x as n,y as ss,z as G,E as ts,G as J,H as K,I as Q,J as Y,O as Z,Q as A,R as X,V as ee,W as se,X as as,Y as F,Z as is}from"./index-ChsUsUzn.js";import"./textarea-Cc706nIt.js";import{S as cs}from"./signal-CKe4z6kc.js";import{B as rs}from"./battery-ca9Vi5Rc.js";import{W as ns}from"./wifi-AOt0VBM1.js";import{C as ls}from"./cpu-C76Pmlxw.js";import{M as os}from"./mic-BonLplW2.js";import{R as ds}from"./radio-Dq5q7HzP.js";import{M as ms}from"./message-square-DmBYsu1V.js";import{C as xs}from"./chart-line-CqXOcTrx.js";import{G as hs}from"./gauge-DH-nFCV6.js";import{C as us}from"./chart-pie-BBZuVBDM.js";import{S as ys}from"./server-Cw-L-UBu.js";import{R as ps}from"./radar-no7Y2inK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=p("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=p("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=p("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=p("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=p("ThermometerSun",[["path",{d:"M12 9a4 4 0 0 0-2 7.5",key:"1jvsq6"}],["path",{d:"M12 3v2",key:"1w22ol"}],["path",{d:"m6.6 18.4-1.4 1.4",key:"w2yidj"}],["path",{d:"M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"iof6y5"}],["path",{d:"M4 13H2",key:"118le4"}],["path",{d:"M6.34 7.34 4.93 5.93",key:"1brd51"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=p("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),I={live_map:{icon:Ze,title:"Live Tactical Map",category:"surveillance"},employee_tracker:{icon:Ye,title:"Personnel Tracker",category:"surveillance"},vehicle_tracker:{icon:Qe,title:"Vehicle Fleet Tracker",category:"surveillance"},geofence_monitor:{icon:ps,title:"Perimeter Monitor",category:"surveillance"},route_playback:{icon:Ke,title:"Route Playback",category:"surveillance"},thermal_overlay:{icon:js,title:"Thermal Overlay",category:"surveillance"},cost_counter:{icon:Je,title:"Cost Operations Center",category:"operations"},time_tracker:{icon:Ge,title:"Time Tracking Hub",category:"operations"},project_overview:{icon:He,title:"Mission Overview",category:"operations"},task_priorities:{icon:re,title:"Task Command",category:"operations"},resource_allocation:{icon:Be,title:"Resource Management",category:"operations"},equipment_status:{icon:ys,title:"Equipment Status",category:"operations"},performance_metrics:{icon:$e,title:"Performance Intel",category:"analytics"},predictive_analytics:{icon:Ue,title:"Predictive Analysis",category:"analytics"},cost_analytics:{icon:us,title:"Financial Intelligence",category:"analytics"},efficiency_monitor:{icon:hs,title:"Efficiency Monitor",category:"analytics"},trend_analysis:{icon:xs,title:"Trend Analysis",category:"analytics"},kpi_dashboard:{icon:ce,title:"KPI Command Center",category:"analytics"},comms_center:{icon:ms,title:"Communications Hub",category:"communications"},alert_system:{icon:qe,title:"Alert Command",category:"communications"},notification_center:{icon:ds,title:"Notification Center",category:"communications"},emergency_comms:{icon:Ve,title:"Emergency Comms",category:"communications"},video_feed:{icon:vs,title:"Video Surveillance",category:"communications"},audio_monitor:{icon:os,title:"Audio Monitor",category:"communications"},security_monitor:{icon:ie,title:"Security Command",category:"security"},access_control:{icon:Ee,title:"Access Control",category:"security"},compliance_tracker:{icon:We,title:"Compliance Monitor",category:"security"},threat_detection:{icon:fs,title:"Threat Detection",category:"security"},audit_log:{icon:Re,title:"Audit Intelligence",category:"security"},incident_tracker:{icon:Oe,title:"Incident Command",category:"security"},system_monitor:{icon:ls,title:"System Monitor",category:"resources"},network_status:{icon:ns,title:"Network Status",category:"resources"},device_health:{icon:rs,title:"Device Health",category:"resources"},signal_strength:{icon:cs,title:"Signal Monitor",category:"resources"},bandwidth_monitor:{icon:Ie,title:"Bandwidth Monitor",category:"resources"},power_management:{icon:gs,title:"Power Management",category:"resources"}},Ws=()=>{const{user:y}=Fe(),[f,ne]=c.useState(null),[g,l]=c.useState({id:"default",name:"Default Tactical Layout",widgets:[],gridSize:{cols:12,rows:8},theme:"tactical"}),[k,O]=c.useState([]),[d,R]=c.useState(!1),[W,le]=c.useState(null),[Ns,bs]=c.useState(!1),[ws,_s]=c.useState({x:0,y:0}),[oe,C]=c.useState(!1),[m,de]=c.useState({employees:[],vehicles:[],projects:[],alerts:[],costs:{},weather:{},communications:[],security:{},system:{}}),[E,me]=c.useState(!0),[S,xe]=c.useState(!0),[j,he]=c.useState(15),[M,ue]=c.useState("all"),[N,ye]=c.useState(""),pe=c.useRef(null),x=c.useRef();c.useEffect(()=>{(async()=>{if(!y)return;const{data:t,error:a}=await r.from("profiles").select("role").eq("id",y.id).single();a||ne(t?.role)})()},[y]),c.useEffect(()=>(f&&["super_admin","admin"].includes(f)&&(q(),U(),b()),()=>{x.current&&clearInterval(x.current)}),[f,q,U,b]),c.useEffect(()=>{S?b():x.current&&clearInterval(x.current)},[S,j,b]);const b=c.useCallback(()=>{x.current&&clearInterval(x.current),x.current=setInterval(()=>{V()},j*1e3),V()},[j]),V=async()=>{try{const[s,t,a,i,h,u,Pe,Ae]=await Promise.all([fe(),ge(),je(),ve(),Ne(),be(),we(),_e()]);de({employees:s||[],vehicles:t||[],projects:a||[],alerts:i||[],costs:h||{},weather:await ke(),communications:u||[],security:Pe||{},system:Ae||{}})}catch{}},fe=async()=>{const{data:s}=await r.from("time_records").select(`
        *,
        employee:employees(*)
      `).is("clock_out",null);return s},ge=async()=>{const{data:s}=await r.from("fleet_vehicles").select("*");return s},je=async()=>{const{data:s}=await r.from("projects").select("*").in("status",["active","in_progress"]);return s},ve=async()=>{const{data:s}=await r.from("notifications").select("*").eq("read",!1).order("created_at",{ascending:!1}).limit(50);return s},Ne=async()=>{const s=new Date().toISOString().split("T")[0],{data:t}=await r.from("time_records").select("*").gte("clock_in",s),{data:a}=await r.from("receipts").select("*").gte("created_at",s);return{labor:t?.reduce((i,h)=>i+h.total_hours*25,0)||0,materials:a?.reduce((i,h)=>i+h.total_amount,0)||0}},be=async()=>{const{data:s}=await r.from("notifications").select("*").order("created_at",{ascending:!1}).limit(20);return s},we=async()=>{const{data:s}=await r.from("employee_violations").select("*").eq("resolved",!1),{data:t}=await r.from("security_events").select("*").order("created_at",{ascending:!1}).limit(10);return{violations:s?.length||0,events:t||[]}},_e=async()=>({cpu:Math.random()*100,memory:Math.random()*100,network:Math.random()*100,uptime:"72h 15m",connections:Math.floor(Math.random()*100)+50}),ke=async()=>({temperature:Math.floor(Math.random()*30)+60,condition:"Partly Cloudy",humidity:Math.floor(Math.random()*40)+40,wind:Math.floor(Math.random()*15)+5}),q=c.useCallback(async()=>{const{data:s,error:t}=await r.from("app_configs").select("*").eq("name","overwatch_layouts").eq("created_by",y?.id);t||s&&s.length>0&&O(s[0].value)},[y?.id]),U=c.useCallback(()=>{const s=[{id:"live_map_1",type:"live_map",title:"Tactical Overview",position:{x:0,y:0},size:{width:6,height:4},config:{theme:"tactical",showGeofences:!0},isMinimized:!1,isFullscreen:!1,category:"surveillance"},{id:"employee_tracker_1",type:"employee_tracker",title:"Personnel Status",position:{x:6,y:0},size:{width:3,height:2},config:{showTracking:!0},isMinimized:!1,isFullscreen:!1,category:"surveillance"},{id:"cost_counter_1",type:"cost_counter",title:"Financial Ops",position:{x:9,y:0},size:{width:3,height:2},config:{viewMode:"daily"},isMinimized:!1,isFullscreen:!1,category:"operations"},{id:"alert_system_1",type:"alert_system",title:"Alert Command",position:{x:6,y:2},size:{width:6,height:2},config:{priority:"high"},isMinimized:!1,isFullscreen:!1,category:"communications"},{id:"system_monitor_1",type:"system_monitor",title:"System Status",position:{x:0,y:4},size:{width:4,height:2},config:{detailed:!0},isMinimized:!1,isFullscreen:!1,category:"resources"},{id:"security_monitor_1",type:"security_monitor",title:"Security Command",position:{x:4,y:4},size:{width:4,height:2},config:{showThreats:!0},isMinimized:!1,isFullscreen:!1,category:"security"},{id:"performance_metrics_1",type:"performance_metrics",title:"Performance Intel",position:{x:8,y:4},size:{width:4,height:2},config:{timeframe:"today"},isMinimized:!1,isFullscreen:!1,category:"analytics"}];l(t=>({...t,widgets:s}))},[]),Ce=s=>{const t=I[s];if(!t)return;const a={id:`${s}_${Date.now()}`,type:s,title:t.title,position:{x:0,y:0},size:{width:3,height:2},config:{},isMinimized:!1,isFullscreen:!1,category:t.category};l(i=>({...i,widgets:[...i.widgets,a]})),C(!1)},Se=s=>{l(t=>({...t,widgets:t.widgets.filter(a=>a.id!==s)}))},Me=s=>{l(t=>({...t,widgets:t.widgets.map(a=>a.id===s?{...a,isMinimized:!a.isMinimized}:a)}))},$=s=>{l(t=>({...t,widgets:t.widgets.map(a=>a.id===s?{...a,isFullscreen:!a.isFullscreen}:a)}))},ze=async s=>{const t={...g,name:s,id:Date.now().toString()},a=[...k,t],{error:i}=await r.from("app_configs").upsert({name:"overwatch_layouts",value:a,created_by:y?.id,description:"OverWatch TOSS dashboard layouts"});i?X({variant:"destructive",title:"Error saving layout",description:i.message}):(O(a),X({title:"Layout saved",description:`Layout "${s}" has been saved successfully`}))},Te=s=>{l(s),R(!1)},Le=s=>{const t=I[s.type];if(!t)return null;const a=t.icon;if(s.isFullscreen)return e.jsx("div",{className:"fixed inset-0 z-50 bg-background",children:e.jsxs(_,{className:"h-full rounded-none border-0",children:[e.jsx(ee,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(a,{className:"h-5 w-5"}),e.jsx("span",{children:s.title})]}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>$(s.id),children:e.jsx(ae,{className:"h-4 w-4"})})]})}),e.jsx(A,{className:"h-full p-6",children:B(s)})]})});const i=80,h={left:s.position.x*i,top:s.position.y*i,width:s.size.width*i,height:s.size.height*i};return e.jsxs(_,{className:`absolute border transition-all duration-200 ${W===s.id?"ring-2 ring-primary":""} ${s.isMinimized?"h-12":""}`,style:h,onClick:()=>le(W===s.id?null:s.id),children:[e.jsx(ee,{className:"pb-2 min-h-12",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(se,{className:"text-sm flex items-center space-x-2",children:[e.jsx(a,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:s.title})]}),d&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:u=>{u.stopPropagation(),Me(s.id)},children:s.isMinimized?e.jsx(te,{className:"h-3 w-3"}):e.jsx(ae,{className:"h-3 w-3"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:u=>{u.stopPropagation(),$(s.id)},children:e.jsx(te,{className:"h-3 w-3"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:u=>{u.stopPropagation(),Se(s.id)},children:e.jsx(as,{className:"h-3 w-3"})})]})]})}),!s.isMinimized&&e.jsx(A,{className:"p-2 overflow-hidden",children:B(s)})]},s.id)},B=s=>{const t=m;switch(s.type){case"live_map":return e.jsx("div",{className:"h-full bg-muted rounded flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(is,{className:"h-12 w-12 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-sm font-medium",children:"Live Tactical Map"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.employees.length," personnel tracked"]})]})});case"employee_tracker":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Active Personnel:"}),e.jsx(v,{children:t.employees.length})]}),e.jsx("div",{className:"space-y-1",children:t.employees.slice(0,3).map((a,i)=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"truncate",children:a.employee?.first_name}),e.jsx(v,{variant:"outline",className:"text-xs",children:"Active"})]},i))})]});case"cost_counter":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold",children:["$",(t.costs.labor+t.costs.materials).toFixed(0)]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Today's Total"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Labor"}),e.jsxs("div",{children:["$",t.costs.labor?.toFixed(0)||0]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Materials"}),e.jsxs("div",{children:["$",t.costs.materials?.toFixed(0)||0]})]})]})]});case"alert_system":return e.jsx(Z,{className:"h-full",children:e.jsx("div",{className:"space-y-2",children:t.alerts.slice(0,4).map((a,i)=>e.jsxs("div",{className:"p-2 bg-muted rounded text-xs",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"font-medium truncate",children:a.title}),e.jsx(v,{variant:"destructive",className:"text-xs",children:"High"})]}),e.jsx("div",{className:"text-muted-foreground truncate",children:a.message})]},i))})});case"system_monitor":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"CPU:"}),e.jsxs("span",{children:[t.system.cpu?.toFixed(0)||0,"%"]})]}),e.jsx(F,{value:t.system.cpu||0,className:"h-1"}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Memory:"}),e.jsxs("span",{children:[t.system.memory?.toFixed(0)||0,"%"]})]}),e.jsx(F,{value:t.system.memory||0,className:"h-1"}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Network:"}),e.jsxs("span",{children:[t.system.network?.toFixed(0)||0,"%"]})]}),e.jsx(F,{value:t.system.network||0,className:"h-1"})]});case"security_monitor":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-destructive",children:t.security.violations||0}),e.jsx("div",{className:"text-muted-foreground",children:"Violations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-green-500",children:t.security.events?.length||0}),e.jsx("div",{className:"text-muted-foreground",children:"Events"})]})]}),e.jsx("div",{className:"space-y-1",children:t.security.events?.slice(0,2).map((a,i)=>e.jsxs("div",{className:"p-1 bg-muted rounded text-xs",children:[e.jsx("div",{className:"font-medium truncate",children:a.type}),e.jsx("div",{className:"text-muted-foreground truncate",children:a.description})]},i))})]});case"performance_metrics":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold",children:"94%"}),e.jsx("div",{className:"text-muted-foreground",children:"Efficiency"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold",children:"87%"}),e.jsx("div",{className:"text-muted-foreground",children:"Quality"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Projects On Time:"}),e.jsx("span",{className:"text-green-500",children:"12/14"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Budget Adherence:"}),e.jsx("span",{className:"text-green-500",children:"96%"})]})]})]});default:return e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ce,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{className:"text-xs",children:"Widget Content"})]})})}},w=(s,t)=>E?t:s,De=Object.entries(I).filter(([s,t])=>{const a=M==="all"||t.category===M,i=N===""||t.title.toLowerCase().includes(N.toLowerCase())||s.toLowerCase().includes(N.toLowerCase());return a&&i});return!f||!["super_admin","admin"].includes(f)?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs(_,{className:"p-8 text-center",children:[e.jsx(ie,{className:"h-16 w-16 mx-auto mb-4 text-destructive"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:w("Administrative access required for OverWatch TOSS","Command authorization required for tactical operations")})]})}):e.jsxs("div",{className:`min-h-screen ${g.theme==="tactical"?"bg-slate-900":"bg-background"}`,children:[e.jsx("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-40",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-6 w-6 text-primary"}),e.jsx("h1",{className:"text-xl font-bold",children:w("OverWatch Tactical & Operational Strategic Systems","TOSS Command & Control Interface")})]}),e.jsx(v,{variant:"outline",className:"bg-green-500/10 text-green-500 border-green-500",children:"OPERATIONAL"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Live"})]}),e.jsx("span",{className:"text-muted-foreground",children:"|"}),e.jsx("span",{children:new Date().toLocaleTimeString()})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{id:"military-jargon",checked:E,onCheckedChange:me}),e.jsx(z,{htmlFor:"military-jargon",className:"text-xs",children:w("Military","Tactical")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{id:"auto-refresh",checked:S,onCheckedChange:xe}),e.jsx(z,{htmlFor:"auto-refresh",className:"text-xs",children:"Auto-Refresh"})]}),e.jsxs(o,{variant:d?"default":"outline",size:"sm",onClick:()=>R(!d),children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),d?"Exit":"Customize"]})]})]})}),d&&e.jsx("div",{className:"border-b bg-muted/50 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(o,{onClick:()=>C(!0),size:"sm",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Add Widget"]}),e.jsxs(T,{value:g.theme,onValueChange:s=>l(t=>({...t,theme:s})),children:[e.jsx(L,{className:"w-32",children:e.jsx(D,{})}),e.jsxs(P,{children:[e.jsx(n,{value:"light",children:"Light"}),e.jsx(n,{value:"dark",children:"Dark"}),e.jsx(n,{value:"tactical",children:"Tactical"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"text-xs",children:"Refresh:"}),e.jsx(ss,{value:[j],onValueChange:s=>he(s[0]),min:5,max:300,step:5,className:"w-20"}),e.jsxs("span",{className:"text-xs",children:[j,"s"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(G,{children:[e.jsx(ts,{asChild:!0,children:e.jsx(o,{variant:"outline",size:"sm",children:"Save Layout"})}),e.jsxs(J,{children:[e.jsx(K,{children:e.jsx(Q,{children:"Save Layout"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Y,{placeholder:"Layout name",onChange:s=>l(t=>({...t,name:s.target.value}))}),e.jsx(o,{onClick:()=>ze(g.name),className:"w-full",children:"Save"})]})]})]}),e.jsxs(T,{onValueChange:s=>{const t=k.find(a=>a.id===s);t&&Te(t)},children:[e.jsx(L,{className:"w-40",children:e.jsx(D,{placeholder:"Load Layout"})}),e.jsx(P,{children:k.map(s=>e.jsx(n,{value:s.id,children:s.name},s.id))})]})]})]})}),e.jsx("div",{className:"relative p-4",children:e.jsx("div",{ref:pe,className:`relative min-h-screen ${d?"bg-grid-pattern":""}`,style:{backgroundImage:d?"radial-gradient(circle, rgba(100,100,100,0.2) 1px, transparent 1px)":"none",backgroundSize:"80px 80px"},children:g.widgets.map(Le)})}),e.jsx(G,{open:oe,onOpenChange:C,children:e.jsxs(J,{className:"max-w-4xl",children:[e.jsx(K,{children:e.jsx(Q,{children:w("Add Widget","Deploy Module")})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(T,{value:M,onValueChange:ue,children:[e.jsx(L,{className:"w-48",children:e.jsx(D,{})}),e.jsxs(P,{children:[e.jsx(n,{value:"all",children:"All Categories"}),e.jsx(n,{value:"surveillance",children:"Surveillance"}),e.jsx(n,{value:"operations",children:"Operations"}),e.jsx(n,{value:"analytics",children:"Analytics"}),e.jsx(n,{value:"communications",children:"Communications"}),e.jsx(n,{value:"security",children:"Security"}),e.jsx(n,{value:"resources",children:"Resources"})]})]}),e.jsx(Y,{placeholder:"Search widgets...",value:N,onChange:s=>ye(s.target.value),className:"max-w-sm"})]}),e.jsx(Z,{className:"h-96",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:De.map(([s,t])=>{const a=t.icon;return e.jsx(_,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>Ce(s),children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(a,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:t.title}),e.jsx(v,{variant:"outline",className:"text-xs",children:t.category})]})]})})},s)})})})]})]})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur border-t",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"System Operational"})]}),e.jsxs("span",{children:["CPU: ",m.system.cpu?.toFixed(0),"%"]}),e.jsxs("span",{children:["Memory: ",m.system.memory?.toFixed(0),"%"]}),e.jsxs("span",{children:["Network: ",m.system.network?.toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Active Personnel: ",m.employees.length]}),e.jsxs("span",{children:["Active Alerts: ",m.alerts.length]}),e.jsxs("span",{children:["Uptime: ",m.system.uptime]}),e.jsxs("span",{children:["Last Update: ",new Date().toLocaleTimeString()]})]})]})})]})};export{Ws as default};
