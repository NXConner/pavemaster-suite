import{c as re,aA as oe,r,j as e,aM as me,n as c,p as he,a7 as xe,a3 as pe,a4 as je,a5 as k,aa as D,i as m,V as p,W as j,Q as h,h as fe,J as G,ac as H,aC as I,o as ue,y as N,k as ge,aL as ve}from"./index-ChsUsUzn.js";import{G as F}from"./grid-3x3-CoIDpFcv.js";import{D as Ne}from"./download-5NXVcGla.js";import{R as ye}from"./ruler-7mBX7vXA.js";import{P as we}from"./palette-DXoiACoT.js";import{S as Se}from"./save-CXbdRz1O.js";import{M as be}from"./maximize-I2sUO1Dt.js";import{C as Ce}from"./copy-Ccw3PTJY.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=re("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);function Oe(){const{toast:R}=oe(),x=r.useRef(null);r.useRef(null);const[E,M]=r.useState([]),[a,w]=r.useState(null),[u,S]=r.useState("space"),[P,B]=r.useState([]),[De,Re]=r.useState(!1),[o,$]=r.useState({width:200,height:150}),[Le,ze]=r.useState("2d"),[b,q]=r.useState(!0),[n,g]=r.useState({spaceWidth:9,spaceLength:18,aisleWidth:24,handicapRatio:.02,compactRatio:.2,electricRatio:.05,maxAngle:90,prioritizeCapacity:!0,minimumTurningRadius:20});r.useEffect(()=>{J(),Q()},[]);const J=async()=>{const s=[{id:"1",name:"Church Main Lot - Optimized",totalArea:15e3,spaces:[],efficiency:85,aisleWidth:24,driveways:[],landscaping:[],createdAt:new Date().toISOString(),estimatedCost:125e3}];M(s)},Q=()=>{x.current&&v()},U=()=>{const s={id:Date.now().toString(),name:`Design ${E.length+1}`,totalArea:o.width*o.height,spaces:[],efficiency:0,aisleWidth:n.aisleWidth,driveways:[],landscaping:[],createdAt:new Date().toISOString(),estimatedCost:0};w(s),v()},V=()=>{if(!a)return;const s=X(),t=Y(s),i=Z(s),l={...a,spaces:s,efficiency:t,estimatedCost:i};w(l),v(),R({title:"Layout Optimized",description:`Generated ${s.length} spaces with ${t.toFixed(1)}% efficiency`})},X=()=>{const s=[],{width:t,height:i}=o,{spaceWidth:l,spaceLength:d,aisleWidth:L}=n,C=d+L,z=Math.floor(i/C),y=Math.floor(t/l);let O=1;for(let A=0;A<z;A++)for(let T=0;T<y;T++){const ce=T*l,de=A*C;let f="standard";const W=Math.random();W<n.handicapRatio?f="handicap":W<n.handicapRatio+n.compactRatio?f="compact":W<n.handicapRatio+n.compactRatio+n.electricRatio&&(f="electric"),s.push({id:O.toString(),x:ce,y:de,width:f==="compact"?l*.8:l,height:f==="handicap"?d*1.2:d,angle:0,type:f,accessible:f==="handicap"}),O++}return s},Y=s=>{if(!a)return 0;const i=s.reduce((l,d)=>l+d.width*d.height,0)/a.totalArea*100;return Math.min(i,100)},Z=s=>{const i=a?.totalArea||0,l=s.filter(y=>y.type==="handicap").length,d=s.filter(y=>y.type==="electric").length,L=i*8.5,C=l*500,z=d*1200;return Math.round(L+C+z)},v=()=>{if(!x.current)return;const s=x.current,t=s.getContext("2d");t&&(t.clearRect(0,0,s.width,s.height),b&&K(t),t.strokeStyle="#333",t.lineWidth=2,t.strokeRect(0,0,o.width,o.height),a?.spaces&&a.spaces.forEach(i=>_(t,i)),a?.driveways&&a.driveways.forEach(i=>ee(t,i)),a?.landscaping&&a.landscaping.forEach(i=>se(t,i)))},K=s=>{s.strokeStyle="#e0e0e0",s.lineWidth=.5;for(let i=0;i<=o.width;i+=10)s.beginPath(),s.moveTo(i,0),s.lineTo(i,o.height),s.stroke();for(let i=0;i<=o.height;i+=10)s.beginPath(),s.moveTo(0,i),s.lineTo(o.width,i),s.stroke()},_=(s,t)=>{const i={standard:"#3b82f6",compact:"#8b5cf6",handicap:"#ef4444",electric:"#10b981"};s.fillStyle=P.includes(t.id)?"#fbbf24":i[t.type],s.strokeStyle="#000",s.lineWidth=1,s.save(),s.translate(t.x+t.width/2,t.y+t.height/2),s.rotate(t.angle*Math.PI/180),s.fillRect(-t.width/2,-t.height/2,t.width,t.height),s.strokeRect(-t.width/2,-t.height/2,t.width,t.height),s.fillStyle="#fff",s.font="10px Arial",s.textAlign="center",s.fillText(t.id,0,0),t.type==="handicap"?(s.fillStyle="#fff",s.font="bold 12px Arial",s.fillText("♿",0,-8)):t.type==="electric"&&(s.fillStyle="#fff",s.font="bold 12px Arial",s.fillText("⚡",0,-8)),s.restore()},ee=(s,t)=>{s.fillStyle="#666",s.fillRect(t.x,t.y,t.width,t.height)},se=(s,t)=>{s.fillStyle="#22c55e",s.fillRect(t.x,t.y,t.width,t.height)},te=s=>{if(!x.current||!a)return;const i=x.current.getBoundingClientRect(),l=s.clientX-i.left,d=s.clientY-i.top;u==="space"?ae(l,d):u==="move"&&ie(l,d)},ae=(s,t)=>{if(!a)return;const i={id:(a.spaces.length+1).toString(),x:s-n.spaceWidth/2,y:t-n.spaceLength/2,width:n.spaceWidth,height:n.spaceLength,angle:0,type:"standard",accessible:!1},l={...a,spaces:[...a.spaces,i]};w(l),v()},ie=(s,t)=>{if(!a)return;const i=a.spaces.find(l=>s>=l.x&&s<=l.x+l.width&&t>=l.y&&t<=l.y+l.height);i&&(B(l=>l.includes(i.id)?l.filter(d=>d!==i.id):[...l,i.id]),v())},le=()=>{a&&(M(s=>[...s,a]),R({title:"Design Saved",description:`${a.name} has been saved successfully`}))},ne=()=>{if(!x.current||!a)return;const s=x.current,t=document.createElement("a");t.download=`${a.name}.png`,t.href=s.toDataURL(),t.click(),R({title:"Design Exported",description:"Layout has been exported as PNG image"})};return r.useEffect(()=>{v()},[a,P,b,o]),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Parking Lot Designer"}),e.jsx("p",{className:"text-muted-foreground",children:"Design optimal parking layouts with intelligent space optimization"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{onClick:U,variant:"outline",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"New Design"]}),e.jsxs(c,{onClick:V,disabled:!a,children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Auto Optimize"]})]})]}),e.jsxs(pe,{defaultValue:"design",className:"space-y-6",children:[e.jsxs(je,{className:"grid w-full grid-cols-4",children:[e.jsx(k,{value:"design",children:"Design Canvas"}),e.jsx(k,{value:"optimization",children:"Optimization"}),e.jsx(k,{value:"analysis",children:"Analysis"}),e.jsx(k,{value:"saved",children:"Saved Designs"})]}),e.jsx(D,{value:"design",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-5",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(m,{children:[e.jsx(p,{children:e.jsxs(j,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),"Design Canvas"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>q(!b),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),b?"Hide":"Show"," Grid"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:ne,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(c,{variant:u==="space"?"default":"outline",size:"sm",onClick:()=>S("space"),children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Space"]}),e.jsxs(c,{variant:u==="move"?"default":"outline",size:"sm",onClick:()=>S("move"),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Select/Move"]}),e.jsxs(c,{variant:u==="aisle"?"default":"outline",size:"sm",onClick:()=>S("aisle"),children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Add Aisle"]}),e.jsxs(c,{variant:u==="landscape"?"default":"outline",size:"sm",onClick:()=>S("landscape"),children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Landscaping"]})]}),e.jsx("canvas",{ref:x,width:800,height:600,className:"border border-gray-300 rounded-md cursor-crosshair bg-white",onClick:te}),a&&e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:a.spaces.length}),e.jsx("div",{className:"text-muted-foreground",children:"Total Spaces"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[a.efficiency.toFixed(1),"%"]}),e.jsx("div",{className:"text-muted-foreground",children:"Efficiency"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.totalArea.toLocaleString()}),e.jsx("div",{className:"text-muted-foreground",children:"Total Area (sq ft)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["$",a.estimatedCost.toLocaleString()]}),e.jsx("div",{className:"text-muted-foreground",children:"Est. Cost"})]})]})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(m,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-sm",children:"Lot Dimensions"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Width (ft)"}),e.jsx(G,{type:"number",value:o.width,onChange:s=>$(t=>({...t,width:Number(s.target.value)})),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Height (ft)"}),e.jsx(G,{type:"number",value:o.height,onChange:s=>$(t=>({...t,height:Number(s.target.value)})),className:"mt-1"})]})]})]}),e.jsxs(m,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-sm",children:"Space Types"})}),e.jsxs(h,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),e.jsx("span",{children:"Standard"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded"}),e.jsx("span",{children:"Compact"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{children:"Handicap ♿"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{children:"Electric ⚡"})]})]})]}),a&&e.jsxs(m,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-sm",children:"Actions"})}),e.jsxs(h,{className:"space-y-2",children:[e.jsxs(c,{onClick:le,className:"w-full",size:"sm",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Save Design"]}),e.jsxs(c,{variant:"outline",className:"w-full",size:"sm",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"3D Preview"]}),e.jsxs(c,{variant:"outline",className:"w-full",size:"sm",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Cost Analysis"]})]})]})]})]})}),e.jsx(D,{value:"optimization",className:"space-y-6",children:e.jsxs(m,{children:[e.jsx(p,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"Optimization Settings"]})}),e.jsxs(h,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Space Dimensions"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Space Width (ft)"}),e.jsx(N,{value:[n.spaceWidth],onValueChange:([s])=>g(t=>({...t,spaceWidth:s})),min:8,max:12,step:.5,className:"mt-2"}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[n.spaceWidth," ft"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Space Length (ft)"}),e.jsx(N,{value:[n.spaceLength],onValueChange:([s])=>g(t=>({...t,spaceLength:s})),min:16,max:22,step:.5,className:"mt-2"}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[n.spaceLength," ft"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Aisle Width (ft)"}),e.jsx(N,{value:[n.aisleWidth],onValueChange:([s])=>g(t=>({...t,aisleWidth:s})),min:20,max:30,step:1,className:"mt-2"}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[n.aisleWidth," ft"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Space Mix Ratios"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Handicap Spaces (%)"}),e.jsx(N,{value:[n.handicapRatio*100],onValueChange:([s])=>g(t=>({...t,handicapRatio:s/100})),min:2,max:10,step:.5,className:"mt-2"}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[(n.handicapRatio*100).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Compact Spaces (%)"}),e.jsx(N,{value:[n.compactRatio*100],onValueChange:([s])=>g(t=>({...t,compactRatio:s/100})),min:0,max:40,step:5,className:"mt-2"}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[(n.compactRatio*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Electric Vehicle Spaces (%)"}),e.jsx(N,{value:[n.electricRatio*100],onValueChange:([s])=>g(t=>({...t,electricRatio:s/100})),min:0,max:20,step:1,className:"mt-2"}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[(n.electricRatio*100).toFixed(0),"%"]})]})]})]}),e.jsx("div",{className:"pt-6 border-t",children:e.jsxs(c,{onClick:V,className:"w-full",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Generate Optimized Layout"]})})]})]})}),e.jsx(D,{value:"analysis",className:"space-y-6",children:a?e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(m,{children:[e.jsx(p,{children:e.jsx(j,{children:"Space Analysis"})}),e.jsx(h,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.spaces.filter(s=>s.type==="standard").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Standard Spaces"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.spaces.filter(s=>s.type==="compact").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Compact Spaces"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.spaces.filter(s=>s.type==="handicap").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Handicap Spaces"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.spaces.filter(s=>s.type==="electric").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Electric Spaces"})]})]})})]}),e.jsxs(m,{children:[e.jsx(p,{children:e.jsx(j,{children:"Cost Breakdown"})}),e.jsx(h,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Asphalt Cost:"}),e.jsxs("span",{children:["$",(a.totalArea*8.5).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Striping & Marking:"}),e.jsxs("span",{children:["$",(a.spaces.length*45).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Handicap Features:"}),e.jsxs("span",{children:["$",(a.spaces.filter(s=>s.type==="handicap").length*500).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"EV Infrastructure:"}),e.jsxs("span",{children:["$",(a.spaces.filter(s=>s.type==="electric").length*1200).toLocaleString()]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-bold",children:[e.jsx("span",{children:"Total Estimated Cost:"}),e.jsxs("span",{children:["$",a.estimatedCost.toLocaleString()]})]})]})})]})]}):e.jsx(m,{children:e.jsxs(h,{className:"text-center py-12",children:[e.jsx(I,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Design Selected"}),e.jsx("p",{className:"text-muted-foreground",children:"Create or select a design to view analysis data"})]})})}),e.jsx(D,{value:"saved",className:"space-y-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:E.map(s=>e.jsxs(m,{children:[e.jsx(p,{children:e.jsxs(j,{className:"flex items-center justify-between text-lg",children:[e.jsx("span",{children:s.name}),e.jsxs(ge,{variant:"outline",children:[s.spaces.length," spaces"]})]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Area"}),e.jsxs("div",{className:"font-medium",children:[s.totalArea.toLocaleString()," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Efficiency"}),e.jsxs("div",{className:"font-medium",children:[s.efficiency.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Est. Cost"}),e.jsxs("div",{className:"font-medium",children:["$",s.estimatedCost.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Created"}),e.jsx("div",{className:"font-medium",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>w(s),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Load"]}),e.jsx(c,{variant:"outline",size:"sm",children:e.jsx(Ce,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",children:e.jsx(ve,{className:"h-4 w-4"})})]})]})]},s.id))})})]})]})})}export{Oe as default};
