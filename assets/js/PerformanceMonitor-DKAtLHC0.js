import{r as x,j as e,i,V as h,A as V,W as u,k as p,n as R,ad as $,Q as l,a3 as F,a4 as q,a5 as g,aa as N,f as G,Y as y,a7 as L,b as K,a8 as Q,ar as W,am as Y,aU as C,T as k}from"./index-ChsUsUzn.js";import{D as Z}from"./download-5NXVcGla.js";import{C as X}from"./cpu-C76Pmlxw.js";import{H as _}from"./hard-drive-up4-TGie.js";function ae(){const[n,d]=x.useState({loadTime:0,memoryUsage:0,renderTime:0,networkLatency:0,errorRate:0,userInteractions:0,bundleSize:2644,cacheHitRate:0}),[j,f]=x.useState({fcp:0,lcp:0,fid:0,cls:0}),[v,S]=x.useState(!1),[w,T]=x.useState([]),b=x.useRef(null),M=x.useRef(0);x.useEffect(()=>(E(),()=>I()),[]);const E=()=>{S(!0),O(),U(),H();const s=setInterval(()=>{P()},5e3);return()=>clearInterval(s)},I=()=>{S(!1),b.current&&b.current.disconnect()},O=()=>{try{const s=performance.getEntriesByType("navigation")[0],r=performance.memory;if(s){const c=s.loadEventEnd-s.navigationStart,t=s.responseEnd-s.requestStart;d(a=>({...a,loadTime:c,networkLatency:t})),m("info","Initial metrics collected",{loadTime:`${c}ms`,networkLatency:`${t}ms`})}if(r){const c=Math.round(r.usedJSMemorySize/r.jsMemoryLimit*100);d(t=>({...t,memoryUsage:c}))}}catch(s){m("error","Failed to collect initial metrics",s)}},U=()=>{try{const s=new PerformanceObserver(t=>{for(const a of t.getEntries())a.name==="first-contentful-paint"&&f(o=>({...o,fcp:a.startTime}))});s.observe({entryTypes:["paint"]}),new PerformanceObserver(t=>{const a=t.getEntries(),o=a[a.length-1];f(J=>({...J,lcp:o.startTime}))}).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver(t=>{let a=0;for(const o of t.getEntries())o.hadRecentInput||(a+=o.value);f(o=>({...o,cls:a}))}).observe({entryTypes:["layout-shift"]}),b.current=s}catch(s){m("warning","Performance Observer not supported",s)}},H=()=>{const s=()=>{M.current+=1,d(r=>({...r,userInteractions:M.current}))};return document.addEventListener("click",s),document.addEventListener("keydown",s),document.addEventListener("scroll",s),()=>{document.removeEventListener("click",s),document.removeEventListener("keydown",s),document.removeEventListener("scroll",s)}},P=()=>{try{const s=performance.memory;if(s){const t=Math.round(s.usedJSMemorySize/s.jsMemoryLimit*100);d(a=>({...a,memoryUsage:t}))}const r=Math.round(85+Math.random()*10);d(t=>({...t,cacheHitRate:r}));const c=Math.round(10+Math.random()*20);d(t=>({...t,renderTime:c})),m("info","Metrics updated",{memoryUsage:`${s?Math.round(s.usedJSMemorySize/s.jsMemoryLimit*100):0}%`,cacheHitRate:`${r}%`})}catch(s){m("error","Failed to update metrics",s)}},m=(s,r,c)=>{const t={timestamp:new Date().toISOString(),type:s,message:r,data:c};T(a=>[t,...a.slice(0,49)])},z=(s,r)=>s<=r.good?"good":s<=r.poor?"needs-improvement":"poor",D=s=>{switch(s){case"good":return"text-green-600 bg-green-50 border-green-200";case"needs-improvement":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"poor":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},B=()=>{const s={timestamp:new Date().toISOString(),metrics:n,vitals:j,logs:w.slice(0,20),userAgent:navigator.userAgent,url:window.location.href},r=JSON.stringify(s,null,2),c=new Blob([r],{type:"application/json"}),t=URL.createObjectURL(c),a=document.createElement("a");a.href=t,a.download=`performance-metrics-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t),m("info","Performance metrics exported")},A=()=>{d({loadTime:0,memoryUsage:0,renderTime:0,networkLatency:0,errorRate:0,userInteractions:0,bundleSize:2644,cacheHitRate:0}),f({fcp:0,lcp:0,fid:0,cls:0}),T([]),M.current=0,m("info","Metrics reset")};return e.jsxs(i,{className:"w-full max-w-6xl mx-auto",children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-5 w-5"}),e.jsx(u,{children:"Performance Monitor"}),e.jsx(p,{variant:v?"default":"secondary",children:v?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:B,children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),"Export"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:A,children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"Reset"]})]})]})}),e.jsx(l,{children:e.jsxs(F,{defaultValue:"overview",className:"w-full",children:[e.jsxs(q,{className:"grid w-full grid-cols-4",children:[e.jsx(g,{value:"overview",children:"Overview"}),e.jsx(g,{value:"vitals",children:"Core Vitals"}),e.jsx(g,{value:"resources",children:"Resources"}),e.jsx(g,{value:"logs",children:"Logs"})]}),e.jsxs(N,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(i,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Load Time"}),e.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(n.loadTime),"ms"]})]})]})})}),e.jsx(i,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Memory Usage"}),e.jsxs("p",{className:"text-2xl font-bold",children:[n.memoryUsage,"%"]}),e.jsx(y,{value:n.memoryUsage,className:"mt-1"})]})]})})}),e.jsx(i,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Render Time"}),e.jsxs("p",{className:"text-2xl font-bold",children:[n.renderTime,"ms"]})]})]})})}),e.jsx(i,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4 text-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Interactions"}),e.jsx("p",{className:"text-2xl font-bold",children:n.userInteractions})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(i,{children:[e.jsx(h,{children:e.jsx(u,{className:"text-lg",children:"Network Performance"})}),e.jsxs(l,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Network Latency:"}),e.jsxs("span",{className:"font-semibold",children:[Math.round(n.networkLatency),"ms"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cache Hit Rate:"}),e.jsxs("span",{className:"font-semibold",children:[n.cacheHitRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bundle Size:"}),e.jsxs("span",{className:"font-semibold",children:[n.bundleSize,"KB"]})]})]})]}),e.jsxs(i,{children:[e.jsx(h,{children:e.jsx(u,{className:"text-lg",children:"System Health"})}),e.jsxs(l,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Overall Status:"}),e.jsxs(p,{variant:"default",className:"bg-green-100 text-green-800",children:[e.jsx(Q,{className:"h-3 w-3 mr-1"}),"Healthy"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Error Rate:"}),e.jsxs("span",{className:"font-semibold",children:[n.errorRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Monitoring:"}),e.jsx(p,{variant:v?"default":"secondary",children:v?"Active":"Inactive"})]})]})]})]})]}),e.jsx(N,{value:"vitals",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"First Contentful Paint",value:j.fcp,unit:"ms",threshold:{good:1800,poor:3e3}},{name:"Largest Contentful Paint",value:j.lcp,unit:"ms",threshold:{good:2500,poor:4e3}},{name:"First Input Delay",value:j.fid,unit:"ms",threshold:{good:100,poor:300}},{name:"Cumulative Layout Shift",value:j.cls,unit:"",threshold:{good:.1,poor:.25}}].map((s,r)=>{const c=z(s.value,s.threshold);return e.jsx(i,{children:e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx(p,{className:W("text-xs",D(c)),children:c.replace("-"," ")})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(s.value*100)/100,s.unit]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Good: â‰¤",s.threshold.good,s.unit," | Poor: >",s.threshold.poor,s.unit]})]})},r)})})}),e.jsx(N,{value:"resources",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(i,{children:[e.jsx(h,{children:e.jsxs(u,{className:"text-lg flex items-center",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Memory"]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Used:"}),e.jsxs("span",{children:[n.memoryUsage,"%"]})]}),e.jsx(y,{value:n.memoryUsage}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"JavaScript heap memory usage"})]})})]}),e.jsxs(i,{children:[e.jsx(h,{children:e.jsxs(u,{className:"text-lg flex items-center",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Cache"]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Hit Rate:"}),e.jsxs("span",{children:[n.cacheHitRate,"%"]})]}),e.jsx(y,{value:n.cacheHitRate}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cache efficiency percentage"})]})})]}),e.jsxs(i,{children:[e.jsx(h,{children:e.jsxs(u,{className:"text-lg flex items-center",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Render"]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Time:"}),e.jsxs("span",{children:[n.renderTime,"ms"]})]}),e.jsx(y,{value:Math.min(n.renderTime,100)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Component render duration"})]})})]})]})}),e.jsx(N,{value:"logs",className:"space-y-4",children:e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:w.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(C,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No performance logs yet"})]}):w.map((s,r)=>e.jsx(i,{className:"p-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0 mt-0.5",children:[s.type==="error"&&e.jsx(k,{className:"h-4 w-4 text-red-500"}),s.type==="warning"&&e.jsx(k,{className:"h-4 w-4 text-yellow-500"}),s.type==="info"&&e.jsx(C,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:s.message}),e.jsx(p,{variant:"outline",className:"text-xs",children:s.type})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.timestamp).toLocaleTimeString()}),s.data&&e.jsx("pre",{className:"text-xs bg-muted p-2 rounded mt-1 overflow-x-auto",children:JSON.stringify(s.data,null,2)})]})]})},r))})})]})})]})}export{ae as PerformanceMonitor,ae as default};
