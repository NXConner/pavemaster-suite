import{c as M,aA as U,r as a,j as e,N as B,n as m,ad as F,a3 as H,a4 as O,a5 as x,aa as h,i,V as n,W as l,M as c,Q as d,k as R,f as P,T as w,a8 as A,U as q,a7 as G,aD as V}from"./index-ChsUsUzn.js";import{B as _}from"./battery-ca9Vi5Rc.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=M("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);function J(){const{toast:u}=U(),[t,b]=a.useState([]),[S,T]=a.useState(null),[k,D]=a.useState([]),[j,p]=a.useState(!1),[g,L]=a.useState({lat:39.8283,lng:-98.5795});a.useEffect(()=>{N(),C();const s=setInterval(()=>{f()},3e4);return()=>clearInterval(s)},[]);const N=async()=>{const s=[{id:"1",name:"Crew Truck #1",type:"vehicle",status:"online",latitude:39.8283,longitude:-98.5795,speed:45,heading:180,battery:85,lastUpdate:new Date().toISOString(),assignedTo:"John Smith"},{id:"2",name:"Asphalt Paver",type:"equipment",status:"online",latitude:39.83,longitude:-98.58,speed:0,heading:0,battery:92,lastUpdate:new Date().toISOString(),assignedTo:"Mike Johnson"},{id:"3",name:"Material Truck",type:"vehicle",status:"low_battery",latitude:39.825,longitude:-98.575,speed:25,heading:90,battery:15,lastUpdate:new Date().toISOString(),assignedTo:"Tom Wilson"}];b(s)},C=async()=>{const s=[{id:"1",deviceId:"1",latitude:39.828,longitude:-98.579,timestamp:new Date(Date.now()-36e5).toISOString(),speed:50},{id:"2",deviceId:"1",latitude:39.8283,longitude:-98.5795,timestamp:new Date().toISOString(),speed:45}];D(s)},f=async()=>{p(!0);try{await N(),u({title:"Locations Updated",description:"GPS device locations have been refreshed"})}catch{u({title:"Update Failed",description:"Failed to update device locations",variant:"destructive"})}finally{p(!1)}},v=s=>{switch(s){case"online":return e.jsx(A,{className:"h-4 w-4 text-green-500"});case"offline":return e.jsx(w,{className:"h-4 w-4 text-red-500"});case"low_battery":return e.jsx(_,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(w,{className:"h-4 w-4 text-gray-500"})}},r=s=>{switch(s){case"vehicle":return e.jsx(V,{className:"h-5 w-5"});case"equipment":return e.jsx(G,{className:"h-5 w-5"});case"personnel":return e.jsx(q,{className:"h-5 w-5"});default:return e.jsx(c,{className:"h-5 w-5"})}},y=s=>{L({lat:s.latitude,lng:s.longitude}),T(s.id)};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"GPS Tracking"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time location monitoring for crews and equipment"})]})]}),e.jsxs(m,{onClick:f,disabled:j,children:[e.jsx(F,{className:`h-4 w-4 mr-2 ${j?"animate-spin":""}`}),"Refresh Locations"]})]}),e.jsxs(H,{defaultValue:"map",className:"space-y-6",children:[e.jsxs(O,{className:"grid w-full grid-cols-3",children:[e.jsx(x,{value:"map",children:"Live Map"}),e.jsx(x,{value:"devices",children:"Device List"}),e.jsx(x,{value:"history",children:"Location History"})]}),e.jsx(h,{value:"map",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-4",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(c,{className:"h-5 w-5"}),"Live Location Map"]})}),e.jsx(d,{children:e.jsx("div",{className:"h-[500px] bg-muted rounded-md flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Interactive Map"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Map integration with Google Maps or Mapbox will be displayed here"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Current center: ",g.lat.toFixed(4),", ",g.lng.toFixed(4)]})]})})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(i,{children:[e.jsx(n,{children:e.jsx(l,{className:"text-sm",children:"Quick Device Access"})}),e.jsx(d,{className:"space-y-2",children:t.map(s=>e.jsxs("div",{className:`p-3 rounded-md border cursor-pointer transition-colors ${S===s.id?"bg-primary/10 border-primary":"hover:bg-muted/50"}`,onClick:()=>y(s),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r(s.type),e.jsx("span",{className:"font-medium text-sm",children:s.name}),v(s.status)]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("div",{children:["Speed: ",s.speed," mph"]}),e.jsxs("div",{children:["Battery: ",s.battery,"%"]})]})]},s.id))})]}),e.jsxs(i,{children:[e.jsx(n,{children:e.jsx(l,{className:"text-sm",children:"Quick Stats"})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Online Devices:"}),e.jsx("span",{className:"font-medium text-green-600",children:t.filter(s=>s.status==="online").length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Offline Devices:"}),e.jsx("span",{className:"font-medium text-red-600",children:t.filter(s=>s.status==="offline").length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Low Battery:"}),e.jsx("span",{className:"font-medium text-yellow-600",children:t.filter(s=>s.status==="low_battery").length})]})]})})]})]})]})}),e.jsx(h,{value:"devices",className:"space-y-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(s=>e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center gap-2 text-lg",children:[r(s.type),s.name,v(s.status)]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Type"}),e.jsx("div",{className:"font-medium capitalize",children:s.type})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Status"}),e.jsx(R,{variant:s.status==="online"?"default":"destructive",children:s.status.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Speed"}),e.jsxs("div",{className:"font-medium",children:[s.speed," mph"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Battery"}),e.jsxs("div",{className:"font-medium",children:[s.battery,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Assigned To"}),e.jsx("div",{className:"font-medium",children:s.assignedTo||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Last Update"}),e.jsx("div",{className:"font-medium",children:new Date(s.lastUpdate).toLocaleTimeString()})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"text-muted-foreground text-sm mb-1",children:"Location"}),e.jsxs("div",{className:"font-mono text-xs",children:[s.latitude.toFixed(6),", ",s.longitude.toFixed(6)]})]}),e.jsxs(m,{onClick:()=>y(s),className:"w-full",variant:"outline",children:[e.jsx(c,{className:"h-4 w-4 mr-2"}),"View on Map"]})]})]},s.id))})}),e.jsx(h,{value:"history",className:"space-y-6",children:e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Location History"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:k.map(s=>{const o=t.find(I=>I.id===s.deviceId);return e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o&&r(o.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:o?.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(s.timestamp).toLocaleString()})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-mono text-sm",children:[s.latitude.toFixed(6),", ",s.longitude.toFixed(6)]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Speed: ",s.speed," mph"]})]}),e.jsxs(m,{variant:"outline",size:"sm",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"View Route"]})]},s.id)})})})]})})]})]})})}export{J as default};
