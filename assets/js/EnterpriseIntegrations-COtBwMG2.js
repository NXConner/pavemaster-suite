import{c as F,u as ee,r as n,R as p,j as e,i,ah as v,k as _,l as E,m as k,n as r,ad as A,Q as c,Y as q,a8 as O,a7 as M,a3 as se,a4 as te,a5 as N,aa as S,q as ae,t as ne,v as ie,w as re,x as d,V as ce,W as le,s as oe,Z as de,U as me,D as ue,ai as xe,a as he,g as pe,T as ge}from"./index-ChsUsUzn.js";import"./textarea-Cc706nIt.js";import{R as je}from"./radio-Dq5q7HzP.js";import{B as fe}from"./building-DJ8xM28B.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=F("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=F("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ke=()=>{const{user:w}=ee(),[x,L]=n.useState(null),[m,b]=n.useState([]),[z,g]=n.useState([]),[U,B]=n.useState([]),[ve,_e]=n.useState(null),[Ne,Se]=n.useState(!1),[j,R]=n.useState(!0),[u,f]=n.useState(300),[I,$]=n.useState("all"),[l,we]=n.useState({overall_health:95,active_connections:12,failed_connections:1,sync_success_rate:97.3,avg_response_time:245}),h=n.useRef();n.useEffect(()=>{(async()=>{if(!w)return;const{data:a,error:t}=await oe.from("profiles").select("role").eq("id",w.id).single();t||L(a?.role)})()},[w]),n.useEffect(()=>(x&&["super_admin","admin"].includes(x)&&(J(),V(),H(),j&&W()),()=>{h.current&&clearInterval(h.current)}),[x,j,u]);const J=async()=>{const s=[{id:"payroll_adp",name:"ADP Workforce Now",type:"payroll",status:"connected",provider:"ADP",version:"2.1.0",last_sync:new Date().toISOString(),sync_frequency:"Daily",data_points:15420,error_count:2,uptime:99.2,description:"Automated payroll processing and employee data synchronization",api_endpoint:"https://api.adp.com/hr/v2/",auth_type:"oauth",features:["Employee Data","Payroll Processing","Time Tracking","Benefits"]},{id:"accounting_qb",name:"QuickBooks Enterprise",type:"accounting",status:"connected",provider:"Intuit",version:"3.0.2",last_sync:new Date().toISOString(),sync_frequency:"Hourly",data_points:8934,error_count:0,uptime:99.8,description:"Financial data synchronization and expense management",api_endpoint:"https://api.quickbooks.com/v3/",auth_type:"oauth",features:["Invoicing","Expense Tracking","Financial Reporting","Tax Management"]},{id:"iot_sensors",name:"Equipment IoT Network",type:"iot",status:"syncing",provider:"Industrial IoT Corp",version:"1.5.1",last_sync:new Date().toISOString(),sync_frequency:"Real-time",data_points:45678,error_count:15,uptime:96.5,description:"Real-time equipment monitoring and predictive maintenance",api_endpoint:"https://iot.industrial.com/api/v1/",auth_type:"api_key",features:["Temperature Monitoring","Vibration Analysis","Fuel Levels","Maintenance Alerts"]},{id:"security_system",name:"Enterprise Security Hub",type:"security",status:"connected",provider:"SecureWatch Pro",version:"4.2.1",last_sync:new Date().toISOString(),sync_frequency:"Real-time",data_points:23456,error_count:3,uptime:99.9,description:"Integrated security monitoring and access control",api_endpoint:"https://api.securewatch.com/v4/",auth_type:"certificate",features:["Access Control","Video Surveillance","Intrusion Detection","Incident Reporting"]},{id:"weather_api",name:"Professional Weather Service",type:"weather",status:"connected",provider:"WeatherTech Solutions",version:"2.3.0",last_sync:new Date().toISOString(),sync_frequency:"Every 15 minutes",data_points:1234,error_count:1,uptime:99.5,description:"Comprehensive weather data for operational planning",api_endpoint:"https://api.weathertech.com/v2/",auth_type:"api_key",features:["Current Conditions","Forecasting","Severe Weather Alerts","Historical Data"]},{id:"fleet_management",name:"Fleet Tracking Pro",type:"iot",status:"error",provider:"FleetOps",version:"3.1.2",last_sync:new Date(Date.now()-36e5).toISOString(),sync_frequency:"Real-time",data_points:8765,error_count:23,uptime:92.1,description:"Vehicle tracking and fleet management integration",api_endpoint:"https://api.fleetops.com/v3/",auth_type:"oauth",features:["GPS Tracking","Fuel Monitoring","Driver Behavior","Maintenance Scheduling"]},{id:"communication_teams",name:"Microsoft Teams Integration",type:"communication",status:"connected",provider:"Microsoft",version:"1.6.0",last_sync:new Date().toISOString(),sync_frequency:"Real-time",data_points:5432,error_count:1,uptime:99.7,description:"Team collaboration and communication integration",api_endpoint:"https://graph.microsoft.com/v1.0/",auth_type:"oauth",features:["Chat Integration","Meeting Scheduling","File Sharing","Notifications"]},{id:"erp_sap",name:"SAP Business One",type:"erp",status:"pending",provider:"SAP",version:"10.0",last_sync:"",sync_frequency:"Daily",data_points:0,error_count:0,uptime:0,description:"Enterprise resource planning integration",api_endpoint:"https://api.sap.com/business-one/v1/",auth_type:"oauth",features:["Resource Planning","Supply Chain","Financial Management","Analytics"]}];b(s)},V=async()=>{const s=[{id:"sync_001",integration_id:"payroll_adp",status:"completed",started_at:new Date(Date.now()-18e5).toISOString(),completed_at:new Date(Date.now()-12e5).toISOString(),records_processed:145,records_total:145},{id:"sync_002",integration_id:"iot_sensors",status:"running",started_at:new Date(Date.now()-3e5).toISOString(),records_processed:8234,records_total:12e3},{id:"sync_003",integration_id:"fleet_management",status:"failed",started_at:new Date(Date.now()-9e5).toISOString(),completed_at:new Date(Date.now()-6e5).toISOString(),records_processed:45,records_total:120,error_message:"Authentication failed - API key expired"}];g(s)},H=async()=>{const s=[{id:"endpoint_001",name:"Employee Data Sync",url:"/api/v1/employees/sync",method:"POST",auth_required:!0,rate_limit:100,last_called:new Date().toISOString(),success_rate:99.2,avg_response_time:245},{id:"endpoint_002",name:"Real-time Location Updates",url:"/api/v1/locations/update",method:"PUT",auth_required:!0,rate_limit:1e3,last_called:new Date().toISOString(),success_rate:97.8,avg_response_time:120},{id:"endpoint_003",name:"Financial Data Import",url:"/api/v1/financial/import",method:"POST",auth_required:!0,rate_limit:50,last_called:new Date().toISOString(),success_rate:98.5,avg_response_time:890}];B(s)},W=()=>{h.current&&clearInterval(h.current),h.current=setInterval(()=>{C("all")},u*1e3)},C=async s=>{if(s==="all"){const a=m.filter(t=>t.status==="connected");for(const t of a){const o={id:`sync_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,integration_id:t.id,status:"running",started_at:new Date().toISOString(),records_processed:0,records_total:Math.floor(Math.random()*1e3)+100};g(D=>[o,...D.slice(0,9)]),setTimeout(()=>{g(D=>D.map(y=>y.id===o.id?{...y,status:Math.random()>.1?"completed":"failed",completed_at:new Date().toISOString(),records_processed:y.records_total,error_message:Math.random()>.1?void 0:"Connection timeout"}:y))},Math.random()*1e4+2e3)}}else{if(!m.find(o=>o.id===s))return;const t={id:`sync_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,integration_id:s,status:"running",started_at:new Date().toISOString(),records_processed:0,records_total:Math.floor(Math.random()*1e3)+100};g(o=>[t,...o.slice(0,9)])}p({title:"Sync Initiated",description:`Data synchronization started for ${s==="all"?"all integrations":"selected integration"}`})},G=async s=>{b(a=>a.map(t=>t.id===s?{...t,status:"connected",last_sync:new Date().toISOString()}:t)),p({title:"Integration Connected",description:"Successfully established connection"})},Q=async s=>{b(a=>a.map(t=>t.id===s?{...t,status:"disconnected"}:t)),p({title:"Integration Disconnected",description:"Connection has been terminated"})},X=async s=>{const a=m.find(t=>t.id===s);a&&(p({title:"Testing Connection",description:`Testing connection to ${a.name}...`}),setTimeout(()=>{const t=Math.random()>.2;p({title:t?"Connection Successful":"Connection Failed",description:t?`${a.name} is responding correctly`:"Unable to establish connection. Please check configuration.",variant:t?"default":"destructive"})},2e3))},Y=s=>{switch(s){case"connected":return e.jsx(O,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(T,{className:"h-5 w-5 text-red-500"});case"syncing":return e.jsx(A,{className:"h-5 w-5 text-blue-500 animate-spin"});case"pending":return e.jsx(ge,{className:"h-5 w-5 text-yellow-500"});default:return e.jsx(T,{className:"h-5 w-5 text-gray-500"})}},P=s=>{switch(s){case"payroll":return e.jsx(pe,{className:"h-5 w-5"});case"accounting":return e.jsx(fe,{className:"h-5 w-5"});case"iot":return e.jsx(M,{className:"h-5 w-5"});case"security":return e.jsx(he,{className:"h-5 w-5"});case"weather":return e.jsx(xe,{className:"h-5 w-5"});case"communication":return e.jsx(je,{className:"h-5 w-5"});case"erp":return e.jsx(ue,{className:"h-5 w-5"});case"crm":return e.jsx(me,{className:"h-5 w-5"});case"mapping":return e.jsx(de,{className:"h-5 w-5"});default:return e.jsx(v,{className:"h-5 w-5"})}},Z=s=>{switch(s){case"connected":return"bg-green-500";case"error":return"bg-red-500";case"syncing":return"bg-blue-500";case"pending":return"bg-yellow-500";default:return"bg-gray-500"}},K=I==="all"?m:m.filter(s=>s.type===I);return!x||!["super_admin","admin"].includes(x)?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(v,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Integration Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Administrative access required for Enterprise Integrations"})]})}):e.jsxs("div",{className:"min-h-screen p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Enterprise Integrations"})]}),e.jsxs(_,{variant:"outline",className:"animate-pulse",children:[m.filter(s=>s.status==="connected").length," Active"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"auto-sync",checked:j,onCheckedChange:R}),e.jsx(k,{htmlFor:"auto-sync",className:"text-sm",children:"Auto Sync"})]}),e.jsxs(r,{onClick:()=>C("all"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Sync All"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(i,{children:e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"System Health"}),e.jsxs("p",{className:"text-2xl font-bold",children:[l.overall_health,"%"]})]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${l.overall_health>95?"bg-green-500":l.overall_health>85?"bg-yellow-500":"bg-red-500"} animate-pulse`})]}),e.jsx(q,{value:l.overall_health,className:"mt-2"})]})}),e.jsx(i,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Connections"}),e.jsx("p",{className:"text-2xl font-bold",children:l.active_connections})]}),e.jsx(ye,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Failed Connections"}),e.jsx("p",{className:"text-2xl font-bold",children:l.failed_connections})]}),e.jsx(T,{className:"h-8 w-8 text-red-500"})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sync Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[l.sync_success_rate,"%"]})]}),e.jsx(O,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Response"}),e.jsxs("p",{className:"text-2xl font-bold",children:[l.avg_response_time,"ms"]})]}),e.jsx(M,{className:"h-8 w-8 text-purple-500"})]})})})]}),e.jsxs(se,{defaultValue:"integrations",className:"space-y-6",children:[e.jsxs(te,{className:"grid w-full grid-cols-4",children:[e.jsx(N,{value:"integrations",children:"Integrations"}),e.jsx(N,{value:"sync-jobs",children:"Sync Jobs"}),e.jsx(N,{value:"api-endpoints",children:"API Endpoints"}),e.jsx(N,{value:"settings",children:"Settings"})]}),e.jsxs(S,{value:"integrations",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Integrations"}),e.jsxs(ae,{value:I,onValueChange:$,children:[e.jsx(ne,{className:"w-48",children:e.jsx(ie,{})}),e.jsxs(re,{children:[e.jsx(d,{value:"all",children:"All Categories"}),e.jsx(d,{value:"payroll",children:"Payroll"}),e.jsx(d,{value:"accounting",children:"Accounting"}),e.jsx(d,{value:"iot",children:"IoT & Sensors"}),e.jsx(d,{value:"security",children:"Security"}),e.jsx(d,{value:"weather",children:"Weather"}),e.jsx(d,{value:"communication",children:"Communication"}),e.jsx(d,{value:"erp",children:"ERP"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:K.map(s=>e.jsxs(i,{className:"relative",children:[e.jsx(ce,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[P(s.type),e.jsx(le,{className:"text-sm font-medium",children:s.name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[Y(s.status),e.jsx("div",{className:`w-2 h-2 rounded-full ${Z(s.status)}`})]})]})}),e.jsxs(c,{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Provider:"}),e.jsx("span",{className:"font-medium",children:s.provider})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Version:"}),e.jsx("span",{className:"font-medium",children:s.version})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Uptime:"}),e.jsxs("span",{className:"font-medium",children:[s.uptime,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Data Points:"}),e.jsx("span",{className:"font-medium",children:s.data_points.toLocaleString()})]}),s.error_count>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Errors:"}),e.jsx("span",{className:"font-medium text-red-500",children:s.error_count})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-xs font-medium",children:"Features:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.features.slice(0,3).map((a,t)=>e.jsx(_,{variant:"outline",className:"text-xs",children:a},t)),s.features.length>3&&e.jsxs(_,{variant:"outline",className:"text-xs",children:["+",s.features.length-3," more"]})]})]}),e.jsx("div",{className:"flex space-x-2 pt-2",children:s.status==="connected"?e.jsxs(e.Fragment,{children:[e.jsxs(r,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>C(s.id),children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Sync"]}),e.jsx(r,{size:"sm",variant:"outline",onClick:()=>X(s.id),children:"Test"}),e.jsx(r,{size:"sm",variant:"destructive",onClick:()=>Q(s.id),children:"Disconnect"})]}):e.jsxs(r,{size:"sm",className:"flex-1",onClick:()=>G(s.id),children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),"Connect"]})})]})]},s.id))})]}),e.jsxs(S,{value:"sync-jobs",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Recent Sync Jobs"}),e.jsx("div",{className:"space-y-3",children:z.map(s=>{const a=m.find(o=>o.id===s.integration_id),t=s.records_total>0?s.records_processed/s.records_total*100:0;return e.jsx(i,{children:e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[a&&P(a.type),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a?.name||"Unknown Integration"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Started: ",new Date(s.started_at).toLocaleString()]})]})]}),e.jsx(_,{variant:s.status==="completed"?"default":s.status==="running"?"secondary":s.status==="failed"?"destructive":"outline",children:s.status.toUpperCase()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progress: ",s.records_processed.toLocaleString()," / ",s.records_total.toLocaleString()]}),e.jsxs("span",{children:[t.toFixed(1),"%"]})]}),e.jsx(q,{value:t,className:"h-2"}),s.error_message&&e.jsxs("div",{className:"text-sm text-red-500 bg-red-50 p-2 rounded",children:["Error: ",s.error_message]}),s.completed_at&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Completed: ",new Date(s.completed_at).toLocaleString()]})]})]})},s.id)})})]}),e.jsxs(S,{value:"api-endpoints",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"API Endpoints"}),e.jsx("div",{className:"space-y-3",children:U.map(s=>e.jsx(i,{children:e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:[s.method," ",s.url]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[s.success_rate,"% Success"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.avg_response_time,"ms avg"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Rate Limit:"}),e.jsxs("div",{className:"font-medium",children:[s.rate_limit,"/min"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Auth Required:"}),e.jsx("div",{className:"font-medium",children:s.auth_required?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Called:"}),e.jsx("div",{className:"font-medium",children:new Date(s.last_called).toLocaleTimeString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Success Rate:"}),e.jsxs("div",{className:"font-medium",children:[s.success_rate,"%"]})]})]})]})},s.id))})]}),e.jsxs(S,{value:"settings",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Integration Settings"}),e.jsx(i,{children:e.jsx(c,{className:"p-6 space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-base",children:"Automatic Synchronization"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable automatic data sync for all connected integrations"})]}),e.jsx(E,{checked:j,onCheckedChange:R})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{children:["Sync Interval: ",u," seconds"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>f(60),className:u===60?"bg-primary text-primary-foreground":"",children:"1 min"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>f(300),className:u===300?"bg-primary text-primary-foreground":"",children:"5 min"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>f(900),className:u===900?"bg-primary text-primary-foreground":"",children:"15 min"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>f(3600),className:u===3600?"bg-primary text-primary-foreground":"",children:"1 hour"})]})]})]})})})]})]})]})};export{ke as default};
